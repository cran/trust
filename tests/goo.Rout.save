
R : Copyright 2005, The R Foundation for Statistical Computing
Version 2.2.0 beta (2005-09-26 r35681)
ISBN 3-900051-07-0

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for a HTML browser interface to help.
Type 'q()' to quit R.

> 
>  objfun <- function(x) {
+      stopifnot(is.numeric(x))
+      stopifnot(length(x) == 2)
+      f <- expression(x1^2 - x2^2)
+      g1 <- D(f, "x1")
+      g2 <- D(f, "x2")
+      h11 <- D(g1, "x1")
+      h12 <- D(g1, "x2")
+      h22 <- D(g2, "x2")
+      x1 <- x[1]
+      x2 <- x[2]
+      f <- eval(f)
+      g <- c(eval(g1), eval(g2))
+      B <- rbind(c(eval(h11), eval(h12)), c(eval(h12), eval(h22)))
+      list(value = f, gradient = g, hessian = B)
+  }
> 
>  library(trust)
> 
>  goo <- trust(objfun, c(3, 1), 1, 5, blather = TRUE, iterlim = 20)
>  goo$converged
[1] FALSE
>  length(goo$r)
[1] 20
>  data.frame(type = goo$steptype, rho = goo$rho, change = goo$preddiff,
+      accept = goo$accept, r = goo$r)
        type rho     change accept r
1  easy-easy   1   -5.72063   TRUE 1
2  easy-easy   1  -12.04462   TRUE 2
3  easy-easy   1  -44.18127   TRUE 4
4  easy-easy   1  -99.27789   TRUE 5
5  easy-easy   1 -149.05763   TRUE 5
6  easy-easy   1 -198.98647   TRUE 5
7  easy-easy   1 -248.95678   TRUE 5
8  easy-easy   1 -298.94224   TRUE 5
9  easy-easy   1 -348.93429   TRUE 5
10 easy-easy   1 -398.92959   TRUE 5
11 easy-easy   1 -448.92663   TRUE 5
12 easy-easy   1 -498.92467   TRUE 5
13 easy-easy   1 -548.92376   TRUE 5
14 easy-easy   1 -598.92153   TRUE 5
15 easy-easy   1 -648.92100   TRUE 5
16 easy-easy   1 -698.92059   TRUE 5
17 easy-easy   1 -748.92028   TRUE 5
18 easy-easy   1 -798.92003   TRUE 5
19 easy-easy   1 -848.91983   TRUE 5
20 easy-easy   1 -898.91967   TRUE 5
> 
>  ##### note: FAILS to converge because function is unbounded -- optimum
>  #####     value does not exist
> 
>  (goo$stepnorm / goo$r)[goo$accept & goo$steptype != "Newton"]
 [1] 0.9999946 1.0000025 0.9999936 1.0000000 1.0000000 1.0000000 1.0000000
 [8] 1.0000000 1.0000000 1.0000000 1.0000000 1.0000000 1.0000008 0.9999986
[15] 0.9999990 0.9999993 0.9999995 0.9999996 0.9999997 0.9999998
> 
> 
